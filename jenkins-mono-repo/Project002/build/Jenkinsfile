pipeline {
    agent any

    stages {
        stage('Build') {
            when{
                changeset "**/Project002/*.*"
                beforeAgent true
            }
            steps {
                echo 'Building project 002..'
            }
        }
        stage('Test') {
            when{
                changeset "**/jenkins-mono-repo/Project002/*.*"
                beforeAgent true
            }
            steps {
                echo 'Testing project 002..'
            }
        }
        stage('Deploy') {
            when{
                beforeAgent true
                anyOf{
                    changeset "**/jenkins-mono-repo/Project002/*.*"
                    triggeredBy cause: 'UserIdCause'
                }                
            }
            steps {
                echo 'Deploying project 002....'
            }
        }
    }
}
