pipeline {
    agent any

    stages {
        stage('Build') {
            when{
                beforeAgent true
                anyOf{
                    //triggeredBy user //this did not work to indentify user launched builds
                    triggeredBy cause: 'UserIdCause'
                    changeset "**/jenkins-mono-repo/Project001/**"
                }
            }
            steps {
                echo 'Building project 001..'
            }
        }
        stage('Test') {
            when{
                changeset "**/jenkins-mono-repo/Project001/**"
                beforeAgent true
            }
            steps {
                echo 'Testing project 001..'
            }
        }
        stage('Deploy') {
            when{
                changeset "**/jenkins-mono-repo/Project001/**"
                beforeAgent true
            }
            steps {
                echo 'Deploying project 001....'
            }
        }
    }
}