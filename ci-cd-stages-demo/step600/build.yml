steps:
- task: Bash@3
  displayName: 'Display build number from template'
  inputs:
    targetType: 'inline'
    script: echo '$(Build.BuildNumber)'

- task: Bash@3
  displayName: 'Display variables'
  inputs:
    targetType: 'inline'
    script: set

- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.9' # string. Required. Version spec. Default: 3.x.
    #disableDownloadFromRegistry: false # boolean. Disable downloading releases from the GitHub registry. Default: false.
    #allowUnstable: false # boolean. Optional. Use when disableDownloadFromRegistry = false. Allow downloading unstable releases. Default: false.
    #githubToken: # string. Optional. Use when disableDownloadFromRegistry = false. GitHub token for GitHub Actions python registry. 
    #addToPath: true # boolean. Add to PATH. Default: true.
  # Advanced
    architecture: 'x64' # 'x86' | 'x64'. Required. Architecture. Default: x64.


# - powershell: |
#    Write-Host "Displaying Python version"
#    python --version
#    Write-Host "Displaying current folder"
#    Get-Location
#    python -m venv myenv
#    Write-Host "Created virtual environment"
#    Write-Host "Activating environment"
#    myenv/Scripts/Activate.ps1
#    Write-Host "Activated environment"
#    pip install pytest
#    pip install -r requirements.txt
#    pytest
#   workingDirectory: /ci-cd-stages-demo/src-python/
#   displayName: 'Run python tests'

- bash: |
   echo "Displaying Python version"
   python --version
   echo "Displaying current folder"
   pwd
   echo "Activating environment"
   myenv/Scripts/activate
   echo "Activated environment"
   pip install pytest
   pip install -r requirements.txt
   pytest
  workingDirectory: /ci-cd-stages-demo/src-python/
  displayName: 'Bash Script-pytest'


- task: Bash@3
  displayName: 'Display variables'
  inputs:
    targetType: 'inline'
    script: set
